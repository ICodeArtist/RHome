<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="renderer" content="webkit|ie-comp|ie-stand">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<!--[if lt IE 9]>
<script type="text/javascript" src="lib/html5shiv.js"></script>
<script type="text/javascript" src="lib/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/css/H-ui.min.css" />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/css/H-ui.admin.css" />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/lib/Hui-iconfont/1.0.8/iconfont.css" />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/skin/default/skin.css" id="skin" />
<link rel="stylesheet" type="text/css" href="__PUBLIC__/admin/css/style.css" />
<!--[if IE 6]>
<script type="text/javascript" src="lib/DD_belatedPNG_0.0.8a-min.js" ></script>
<script>DD_belatedPNG.fix('*');</script>
<![endif]-->
<title></title>
</head>
<body>
<div class="page-container">
	<form class="form form-horizontal" id="form-carousel-add" action="__URL__/addSvs" enctype="multipart/form-data" method="post" onsubmit="return toVaild()" target="_parent">
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>分配组织：</label>
			<div class="formControls col-xs-8 col-sm-9" style="margin-top: 5px;" >
				<select name="party" id="changeO">
				</select>
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>姓名:</label>
			<div class="formControls col-xs-8 col-sm-2">
				<input type="text" class="input-text" value="" placeholder="" id="name" name="name">
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>电话:</label>
			<div class="formControls col-xs-8 col-sm-2">
				<input type="text" class="input-text" value="" placeholder="" id="phone" name="phone">
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>标题:</label>
			<div class="formControls col-xs-8 col-sm-2">
				<input type="text" class="input-text" value="" placeholder="" id="title" name="title">
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>需求内容：</label>
			<div class="formControls col-xs-8 col-sm-9">
				<textarea id="status" name="content" cols="" rows="" class="textarea"  placeholder="说点什么...最少输入10个字符" datatype="*10-100" dragonfly="true" nullmsg="备注不能为空！" onkeydown='countChar("status","counter");'
onkeyup='countChar("status","counter");'></textarea>
				<p class="textarea-numberbar"><em class="textarea-length" id="counter">0</em>/200</p>
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-2">图片：</label>
      <input type='file'  name='picture[]' style="padding-left: 15px;">
			<input type='file'  name='picture[]' style="padding-left: 15px;">
			<input type='file'  name='picture[]' style="padding-left: 15px;">
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>地址:</label>
			<div class="formControls col-xs-8 col-sm-6">
				<input type="text" class="input-text" value="" placeholder="" id="address" name="address">
			</div>
		</div>
		<div class="row cl">
			<label class="form-label col-xs-4 col-sm-2"><span class="c-red">*</span>积分:</label>
			<div class="formControls col-xs-8 col-sm-1">
				<input type="text" class="input-text" value="" placeholder="" id="score" name="score">
			</div>
		</div>
		<div class="row cl">
			<div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-2">
				<button class="btn btn-primary radius" type="submit" form="form-carousel-add"><i class="Hui-iconfont">&#xe632;</i> 提交</button>
				<button onClick="layer_close();" class="btn btn-default radius" type="button">&nbsp;&nbsp;取消&nbsp;&nbsp;</button>
			</div>
		</div>
	</form>
</div>
<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="__PUBLIC__/lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/static/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/admin/js/H-ui.admin.js"></script>
<!--/_footer 作为公共模版分离出去-->
<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="__PUBLIC__/lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
<script type="text/javascript">
function toVaild(){
   var party = document.getElementById("changeO").value;
   var name = document.getElementById("name").value;
   var phone = document.getElementById("phone").value;
   var title = document.getElementById("title").value;
	 var status = document.getElementById("status").value;
	 var address = document.getElementById("address").value;
	 var score = document.getElementById("score").value;
   if(party == ""){
     alert("分配组织不能为空");
     return false;
   }
   if(name == ""){
     alert("姓名不能为空");
     return false;
   }
   if(phone == ""){
     alert("电话不能为空");
     return false;
   }
	 var myreg = /^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/;
	 if(!myreg.test(phone)) {
		 alert('请输入有效的手机号码！');
		 return false;
	 }
   if(title == ""){
     alert("标题不能为空");
     return false;
   }
	if(status == ""){
		alert("内容不能为空");
		return false;
	}
	/*var txts = document.getElementsByName("picture[]");
	var flag = 0;
  for(i = 0; i < txts.length; i++) {
    if(txts[i].value == '') {
			flag++;
    }
  }
	if(flag>2){
		alert('至少传一张');
		return false;
	}*/
	if(address == ""){
		alert("地址不能为空");
		return false;
	}
	if(score == ""){
		alert("积分不能为空");
		return false;
	}
	var re =  /^[1-9]+[0-9]*]*$/ ;
	if(!re.test(score)){
		alert("积分必须为正整数");
		return false;
	}
}
 function countChar(textareaName,spanName){
   document.getElementById(spanName).innerHTML = 200 - document.getElementById(textareaName).value.length;
 }
 $(function(){
 	var html = [];
 	$.ajax({
 		type: 'POST',
 		url: 'getDealParty',
 		dataType: 'json',
 		success: function(data){
 			html.push('<option value="">==选择分配组织==</option>');
 			for (var i = 0; i < data.length; i++) {
 				html.push('<option value="'+data[i].id+'">'+data[i].name+'</option>');
 			}
 			$('#changeO').empty().append(html.join(''));
 		},
 		error:function(data) {
 			alert('error');
 		},
 	});
 });
</script>
</body>
</html>
